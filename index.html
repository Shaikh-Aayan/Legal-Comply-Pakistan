<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PakLegalComply | Complete Legal Compliance Solution</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2c5f2d; /* Forest Green */
            --secondary: #8f3b1b; /* Rustic Brown */
            --accent: #d4af37; /* Gold */
            --dark: #333333; /* Dark Gray */
            --light: #f8f7f2; /* Light Cream */
            --highlight: #7d6e63; /* Muted Brown */
            --contrast: #005f73; /* Deep Teal */
        }
        
        [data-theme="dark"] {
            --primary: #4caf50;
            --secondary: #c77d63;
            --accent: #ffd700;
            --dark: #f0f0f0;
            --light: #1e1e1e;
            --highlight: #a1887f;
            --contrast: #4db6ac;
        }
        
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: var(--light);
            color: var(--dark);
            transition: background-color 0.3s, color 0.3s;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23a1887f' fill-opacity='0.08' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Merriweather', serif;
            color: var(--dark);
        }
        
        [data-theme="dark"] h1, 
        [data-theme="dark"] h2, 
        [data-theme="dark"] h3, 
        [data-theme="dark"] h4, 
        [data-theme="dark"] h5 {
            color: var(--light);
        }
        
        .classic-header {
            background: linear-gradient(135deg, var(--primary), var(--contrast));
            color: white;
            border-bottom: 4px solid var(--accent);
        }
        
        .card {
            background-color: rgba(248, 247, 242, 0.95);
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(161, 136, 127, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        [data-theme="dark"] .card {
            background-color: rgba(40, 40, 40, 0.95);
        }
        
        .card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(to right, var(--primary), var(--secondary), var(--accent));
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .badge {
            padding: 4px 10px;
            border-radius: 16px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .compliance-badge {
            background-color: rgba(44, 95, 45, 0.15);
            color: var(--primary);
            border: 1px solid var(--primary);
        }
        
        .risk-badge {
            background-color: rgba(212, 175, 55, 0.15);
            color: var(--accent);
            border: 1px solid var(--accent);
        }
        
        .noncompliant-badge {
            background-color: rgba(143, 59, 27, 0.15);
            color: var(--secondary);
            border: 1px solid var(--secondary);
        }
        
        .progress-bar {
            height: 8px;
            border-radius: 4px;
            background-color: rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 4px;
        }
        
        .tab-button {
            padding: 12px 20px;
            border-radius: 8px;
            transition: all 0.3s;
            cursor: pointer;
            font-weight: 500;
            border-bottom: 3px solid transparent;
        }
        
        .tab-button.active {
            background-color: var(--primary);
            color: white;
            border-bottom: 3px solid var(--accent);
        }
        
        .task-item {
            border-left: 3px solid transparent;
            transition: all 0.3s;
            background-color: rgba(248, 247, 242, 0.6);
        }
        
        .task-item:hover {
            border-left-color: var(--accent);
            background-color: rgba(212, 175, 55, 0.1);
        }
        
        .task-item.completed {
            border-left-color: var(--primary);
            background-color: rgba(44, 95, 45, 0.1);
        }
        
        .chat-bubble {
            max-width: 80%;
            border-radius: 16px;
            padding: 12px 16px;
            margin-bottom: 12px;
            position: relative;
            opacity: 0;
            transform: translateY(10px);
            animation: fadeInUp 0.3s forwards;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .user-bubble {
            background-color: var(--primary);
            color: white;
            border-bottom-right-radius: 4px;
            margin-left: auto;
        }
        
        .ai-bubble {
            background-color: rgba(125, 110, 99, 0.1);
            border-bottom-left-radius: 4px;
            margin-right: auto;
            border: 1px solid rgba(125, 110, 99, 0.2);
        }
        
        [data-theme="dark"] .ai-bubble {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .timeline-item {
            position: relative;
            padding-left: 30px;
            margin-bottom: 30px;
        }
        
        .timeline-item:before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--accent);
            border: 2px solid var(--light);
        }
        
        .timeline-item:after {
            content: '';
            position: absolute;
            left: 7px;
            top: 16px;
            width: 2px;
            height: calc(100% + 14px);
            background: var(--accent);
        }
        
        .timeline-item:last-child:after {
            display: none;
        }
        
        .slide-in {
            animation: slideIn 0.3s ease-out forwards;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in {
            animation: fadeIn 0.4s ease-in forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(44, 95, 45, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(44, 95, 45, 0); }
            100% { box-shadow: 0 0 0 0 rgba(44, 95, 45, 0); }
        }
        
        .reminder-set {
            background-color: rgba(212, 175, 55, 0.2);
            border-color: var(--accent);
        }
        
        .typing-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--highlight);
            margin: 0 2px;
            opacity: 0.4;
            animation: typing 1.4s infinite;
        }
        
        .typing-indicator:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-indicator:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 25px;
            background: var(--primary);
            color: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
            z-index: 1000;
            border-left: 4px solid var(--accent);
        }
        
        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Calendar styles */
        .calendar-day {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 30px;
            width: 30px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .calendar-day:hover {
            background-color: rgba(44, 95, 45, 0.1);
        }
        
        .calendar-day.today {
            background-color: var(--accent);
            color: white;
        }
        
        .calendar-day.event {
            position: relative;
        }
        
        .calendar-day.event::after {
            content: '';
            position: absolute;
            bottom: 2px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background-color: var(--secondary);
        }
        
        .calendar-day.selected {
            background-color: var(--primary);
            color: white;
        }
        
        /* Document preview */
        .document-preview {
            background-color: #f8f5f0;
            border: 1px solid #d4c8b8;
            padding: 20px;
            min-height: 300px;
            font-family: 'Merriweather', serif;
        }
        
        .document-header {
            text-align: center;
            border-bottom: 2px solid #8B4513;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .document-title {
            font-size: 24px;
            font-weight: bold;
            color: #8B4513;
        }
        
        .document-subtitle {
            font-size: 18px;
            color: var(--secondary);
        }
        
        .document-body {
            line-height: 1.8;
        }
        
        .signature-line {
            border-top: 1px solid #000;
            width: 200px;
            margin: 40px 0 10px;
        }
        
        /* Form styles */
        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid rgba(161, 136, 127, 0.3);
            border-radius: 8px;
            margin-bottom: 15px;
            transition: border-color 0.3s;
            background-color: rgba(248, 247, 242, 0.5);
        }
        
        .form-input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(44, 95, 45, 0.2);
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }
        
        .form-submit {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, var(--primary), var(--contrast));
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.3s;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .form-submit:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        /* Traditional pattern */
        .traditional-pattern {
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%238f3b1b' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        
        /* Login Page */
        .login-container {
            display: flex;
            min-height: 100vh;
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                        url('https://images.unsplash.com/photo-1589391886645-d51941baf7fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80');
            background-size: cover;
            background-position: center;
        }
        
        .login-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 400px;
            padding: 40px 30px;
            margin: auto;
        }
        
        .login-title {
            text-align: center;
            margin-bottom: 30px;
            color: var(--primary);
        }
        
        .login-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .login-logo-icon {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
        }
        
        .login-logo-icon i {
            color: white;
            font-size: 24px;
        }
        
        .login-logo-text {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .login-footer {
            text-align: center;
            margin-top: 20px;
            color: #666;
            font-size: 14px;
        }
        
        .login-footer a {
            color: var(--primary);
            text-decoration: none;
        }
        
        .login-footer a:hover {
            text-decoration: underline;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .grid-cols-1-md {
                grid-template-columns: 1fr;
            }
            
            .flex-col-md {
                flex-direction: column;
            }
            
            .text-center-md {
                text-align: center;
            }
            
            .hero-section h1 {
                font-size: 2rem;
            }
            
            .hero-section p {
                font-size: 1rem;
            }
        }
        
        .poetry-section {
            font-style: italic;
            text-align: center;
            padding: 20px;
            margin: 20px 0;
            border-top: 1px solid var(--accent);
            border-bottom: 1px solid var(--accent);
            color: var(--dark);
            font-family: 'Merriweather', serif;
        }
        
        [data-theme="dark"] .poetry-section {
            color: var(--light);
        }
        
        .artistic-divider {
            height: 20px;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='20' viewBox='0 0 100 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0,10 Q25,5 50,10 T100,10' stroke='%23d4af37' stroke-width='2' fill='none'/%3E%3C/svg%3E");
            background-repeat: repeat-x;
            margin: 20px 0;
            opacity: 0.7;
        }
        
        .classic-button {
            background: linear-gradient(135deg, var(--primary), var(--contrast));
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .classic-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .calligraphic-icon {
            font-family: 'Merriweather', serif;
            font-weight: 700;
            color: var(--accent);
            font-size: 1.2em;
        }
        
        /* Landing page styles */
        .landing-page {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .hero-section {
            background: linear-gradient(rgba(0, 0, 0, 0.6), url('https://images.unsplash.com/photo-1589391886645-d51941baf7fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
        }
        
        .feature-card {
            transition: all 0.3s ease;
            border: 1px solid rgba(161, 136, 127, 0.2);
        }
        
        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        /* Legal content styling */
        .legal-content {
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.8;
        }
        
        .legal-content h2 {
            border-bottom: 2px solid var(--accent);
            padding-bottom: 10px;
            margin-top: 30px;
        }
        
        .legal-content h3 {
            margin-top: 25px;
            color: var(--primary);
        }
        
        .legal-content ul {
            padding-left: 20px;
            margin: 15px 0;
        }
        
        .legal-content li {
            margin-bottom: 8px;
        }
        
        /* Backend simulation styling */
        .backend-console {
            background-color: #1e1e1e;
            color: #d4d4d4;
            border-radius: 8px;
            padding: 15px;
            font-family: monospace;
            font-size: 14px;
            overflow: auto;
            max-height: 300px;
        }
        
        .console-line {
            margin-bottom: 8px;
        }
        
        .console-success {
            color: #4EC9B0;
        }
        
        .console-error {
            color: #F44747;
        }
        
        .console-warning {
            color: #DCDCAA;
        }
        
        .console-info {
            color: #9CDCFE;
        }
        
        /* Document preview modal */
        .document-preview-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        
        .document-preview-modal.show {
            opacity: 1;
            visibility: visible;
        }
        
        .document-preview-container {
            background: white;
            border-radius: 8px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow: auto;
            position: relative;
            transform: translateY(20px);
            transition: transform 0.3s;
        }
        
        .document-preview-modal.show .document-preview-container {
            transform: translateY(0);
        }
        
        /* Loading overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(44, 95, 45, 0.3);
            border-radius: 50%;
            border-top: 5px solid var(--primary);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="spinner"></div>
    </div>

    <!-- Login Page -->
    <div id="login-page" class="login-container">
        <div class="login-card">
            <div class="login-logo">
                <div class="login-logo-icon">
                    <i class="fas fa-balance-scale"></i>
                </div>
                <div class="login-logo-text">PakLegalComply</div>
            </div>
            
            <h2 class="login-title">Startup Legal Compliance Portal</h2>
            
            <form id="login-form">
                <div class="mb-4">
                    <label class="form-label">Email Address</label>
                    <input type="email" id="login-email" class="form-input" placeholder="your@email.com" required>
                </div>
                
                <div class="mb-6">
                    <label class="form-label">Password</label>
                    <input type="password" id="login-password" class="form-input" placeholder="••••••••" required>
                </div>
                
                <div class="mb-4 flex items-center">
                    <input type="checkbox" id="remember-me" class="mr-2">
                    <label for="remember-me">Remember me</label>
                </div>
                
                <button type="submit" class="form-submit">
                    <i class="fas fa-sign-in-alt mr-2"></i> Login to Dashboard
                </button>
                
                <div class="mt-4 text-center">
                    <a href="#" class="text-green-700 hover:underline">Forgot your password?</a>
                </div>
            </form>
            
            <div class="login-footer">
                <p>Don't have an account? <a href="#" id="register-link">Register your startup</a></p>
                <p class="mt-2">© 2023 PakLegalComply - Pakistan. All rights reserved.</p>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="main-app" class="min-h-screen flex flex-col hidden">
        <!-- Top Navigation -->
        <header class="classic-header text-white shadow-lg">
            <div class="container mx-auto px-4 py-3 flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center">
                        <i class="fas fa-balance-scale text-green-700 text-xl"></i>
                    </div>
                    <h1 class="text-xl font-bold">PakLegalComply <span class="font-light">Pakistan</span></h1>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="hidden md:flex items-center space-x-2 bg-white/20 rounded-full px-4 py-1">
                        <i class="fas fa-user-circle"></i>
                        <span id="user-name-display">Guest</span>
                        <span class="badge compliance-badge" id="user-role-display">Trial</span>
                    </div>
                    <div class="hidden md:block">
                        <span id="theme-toggle" class="cursor-pointer p-2 rounded-full hover:bg-white/20">
                            <i class="fas fa-moon"></i>
                        </span>
                    </div>
                    <button id="logout-button" class="bg-white text-green-800 font-semibold px-4 py-2 rounded-full hover:bg-gray-100 transition">
                        <i class="fas fa-sign-out-alt mr-2"></i>Logout
                    </button>
                </div>
            </div>
            
            <!-- Poetry Section -->
            <div class="poetry-section">
                "Where law meets tradition, justice blooms like the desert rose"
            </div>
            
            <!-- Main Navigation Tabs -->
            <nav class="container mx-auto px-4">
                <div class="flex space-x-2 overflow-x-auto py-2">
                    <div class="tab-button active" data-tab="dashboard">
                        <span class="calligraphic-icon">D</span>ashboard
                    </div>
                    <div class="tab-button" data-tab="checklist">
                        <span class="calligraphic-icon">C</span>ompliance
                    </div>
                    <div class="tab-button" data-tab="timeline">
                        <span class="calligraphic-icon">T</span>imeline
                    </div>
                    <div class="tab-button" data-tab="documents">
                        <span class="calligraphic-icon">D</span>ocuments
                    </div>
                    <div class="tab-button" data-tab="chat">
                        <span class="calligraphic-icon">A</span>dvisor
                    </div>
                    <div class="tab-button" data-tab="account">
                        <span class="calligraphic-icon">A</span>ccount
                    </div>
                    <div class="tab-button" data-tab="legal">
                        <span class="calligraphic-icon">L</span>egal
                    </div>
                    <div class="tab-button" data-tab="backend">
                        <span class="calligraphic-icon">B</span>ackend
                    </div>
                </div>
            </nav>
        </header>

        <main class="flex-grow container mx-auto px-4 py-8">
            <!-- Dashboard View -->
            <div id="dashboard-view" class="tab-content">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                    <div>
                        <h2 class="text-3xl font-bold mb-2">Compliance Dashboard</h2>
                        <p class="text-gray-600">Track your startup's legal journey</p>
                    </div>
                    <div class="mt-4 md:mt-0 flex items-center space-x-3">
                        <div class="relative">
                            <div class="w-24 h-24 rounded-full flex items-center justify-center" style="background: var(--primary);">
                                <span class="text-white text-2xl font-bold" id="overall-progress">78%</span>
                            </div>
                            <svg class="absolute top-0 left-0 w-24 h-24" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="45" fill="none" stroke="#e0e0e0" stroke-width="8" />
                                <circle cx="50" cy="50" r="45" fill="none" stroke="url(#gradient)" stroke-width="8" stroke-dasharray="283" stroke-dashoffset="62" stroke-linecap="round" transform="rotate(-90 50 50)" />
                                <defs>
                                    <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" stop-color="var(--primary)" />
                                        <stop offset="100%" stop-color="var(--accent)" />
                                    </linearGradient>
                                </defs>
                            </svg>
                        </div>
                        <div>
                            <div class="badge compliance-badge" id="compliance-status">Good Standing</div>
                            <p class="text-sm text-gray-500 mt-1">Updated: <span id="last-updated">Today</span></p>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="card p-6 slide-in" style="animation-delay: 0.1s">
                        <h3 class="font-semibold text-lg mb-4">Compliance Status</h3>
                        <div class="space-y-4" id="compliance-status-list">
                            <!-- Compliance status will be rendered here -->
                        </div>
                    </div>
                    
                    <div class="card p-6 slide-in" style="animation-delay: 0.2s">
                        <h3 class="font-semibold text-lg mb-4">Urgent Tasks</h3>
                        <div class="space-y-4" id="urgent-tasks">
                            <!-- Urgent tasks will be rendered here -->
                        </div>
                    </div>
                    
                    <div class="card p-6 slide-in" style="animation-delay: 0.3s">
                        <h3 class="font-semibold text-lg mb-4">Compliance Health</h3>
                        <div class="h-64">
                            <canvas id="complianceChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="artistic-divider"></div>
                
                <div class="card p-6 mb-8 slide-in" style="animation-delay: 0.4s">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-semibold text-lg">Recent Activities</h3>
                        <button class="text-sm text-green-700 font-medium">View All</button>
                    </div>
                    <div class="space-y-4" id="recent-activities">
                        <!-- Recent activities will be rendered here -->
                    </div>
                </div>
            </div>
            
            <!-- Compliance Checklist View -->
            <div id="checklist-view" class="tab-content hidden">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                    <div>
                        <h2 class="text-3xl font-bold mb-2">Compliance Checklist</h2>
                        <p class="text-gray-600">Interactive checklist for Pakistani regulations</p>
                    </div>
                    <div class="mt-4 md:mt-0 flex space-x-3">
                        <button class="classic-button flex items-center">
                            <i class="fas fa-filter mr-2"></i> Filter
                        </button>
                        <button class="classic-button flex items-center">
                            <i class="fas fa-sort mr-2"></i> Sort
                        </button>
                        <button class="classic-button flex items-center" id="add-task-btn">
                            <i class="fas fa-plus mr-2"></i> Add Task
                        </button>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                    <div class="card p-6 lg:col-span-1">
                        <h3 class="font-semibold text-lg mb-4">Compliance Categories</h3>
                        <div class="space-y-3" id="categories-list">
                            <!-- Categories will be rendered here -->
                        </div>
                    </div>
                    
                    <div class="card p-6 lg:col-span-3">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="font-semibold text-lg" id="current-category">Taxation Compliance</h3>
                            <div class="flex items-center">
                                <span class="text-sm text-gray-600 mr-3" id="category-progress">0/0 completed</span>
                                <div class="w-32 h-2 bg-gray-200 rounded-full">
                                    <div class="h-full bg-gradient-to-r from-green-700 to-yellow-600 rounded-full" id="category-progress-bar" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-4" id="tasks-container">
                            <!-- Tasks will be rendered here -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Timeline View -->
            <div id="timeline-view" class="tab-content hidden">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                    <div>
                        <h2 class="text-3xl font-bold mb-2">Compliance Timeline</h2>
                        <p class="text-gray-600">Upcoming deadlines and important dates</p>
                    </div>
                    <div class="mt-4 md:mt-0 flex space-x-3">
                        <button id="add-event-btn" class="classic-button flex items-center">
                            <i class="fas fa-calendar-plus mr-2"></i> Add Event
                        </button>
                        <button class="classic-button flex items-center">
                            <i class="fas fa-download mr-2"></i> Export
                        </button>
                    </div>
                </div>
                
                <div class="card p-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <h3 class="font-semibold text-lg mb-4">Upcoming Deadlines</h3>
                            <div class="space-y-4" id="upcoming-deadlines">
                                <div class="flex items-start p-3 rounded-lg border border-yellow-200 bg-yellow-50">
                                    <div class="w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center mr-3">
                                        <i class="fas fa-exclamation text-yellow-600"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium">File Monthly Withholding Tax Statement</h4>
                                        <p class="text-sm text-gray-600 mt-1">Due in 3 days (15th of each month)</p>
                                    </div>
                                </div>
                                <div class="flex items-start p-3 rounded-lg border border-blue-200 bg-blue-50">
                                    <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-3">
                                        <i class="fas fa-calendar-day text-blue-600"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium">Register for Income Tax</h4>
                                        <p class="text-sm text-gray-600 mt-1">Due in 1 month</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="md:col-span-2">
                            <h3 class="font-semibold text-lg mb-4">Compliance Calendar</h3>
                            <div class="bg-white rounded-lg border p-4">
                                <div id="calendar" class="min-h-[400px]">
                                    <div class="flex justify-between items-center mb-4">
                                        <button id="prev-month" class="classic-button px-3 py-1">
                                            <i class="fas fa-chevron-left"></i>
                                        </button>
                                        <h4 id="current-month" class="font-bold text-lg">July 2023</h4>
                                        <button id="next-month" class="classic-button px-3 py-1">
                                            <i class="fas fa-chevron-right"></i>
                                        </button>
                                    </div>
                                    <div class="grid grid-cols-7 gap-1 text-center">
                                        <div class="font-bold py-2">Sun</div>
                                        <div class="font-bold py-2">Mon</div>
                                        <div class="font-bold py-2">Tue</div>
                                        <div class="font-bold py-2">Wed</div>
                                        <div class="font-bold py-2">Thu</div>
                                        <div class="font-bold py-2">Fri</div>
                                        <div class="font-bold py-2">Sat</div>
                                        
                                        <!-- Calendar days will be dynamically generated -->
                                        <div id="calendar-days" class="col-span-7 grid grid-cols-7 gap-1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Documents View -->
            <div id="documents-view" class="tab-content hidden">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                    <div>
                        <h2 class="text-3xl font-bold mb-2">Legal Documents</h2>
                        <p class="text-gray-600">Templates and your uploaded documents</p>
                    </div>
                    <div class="mt-4 md:mt-0 flex space-x-3">
                        <button id="upload-document-btn" class="classic-button flex items-center">
                            <i class="fas fa-upload mr-2"></i> Upload
                        </button>
                        <button id="create-document-btn" class="classic-button flex items-center">
                            <i class="fas fa-plus mr-2"></i> New Document
                        </button>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="card p-6">
                        <h3 class="font-semibold text-lg mb-4">Document Categories</h3>
                        <div class="space-y-3" id="document-categories">
                            <button class="w-full text-left p-3 rounded-lg bg-green-100 text-green-800 font-medium document-category active" data-category="incorporation">
                                <i class="fas fa-building mr-2"></i> Incorporation
                            </button>
                            <button class="w-full text-left p-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition document-category" data-category="taxation">
                                <i class="fas fa-file-invoice-dollar mr-2"></i> Taxation
                            </button>
                            <button class="w-full text-left p-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition document-category" data-category="employment">
                                <i class="fas fa-users mr-2"></i> Employment
                            </button>
                            <button class="w-full text-left p-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition document-category" data-category="ip">
                                <i class="fas fa-lightbulb mr-2"></i> Intellectual Property
                            </button>
                            <button class="w-full text-left p-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition document-category" data-category="data">
                                <i class="fas fa-shield-alt mr-2"></i> Data Protection
                            </button>
                        </div>
                    </div>
                    
                    <div class="card p-6 md:col-span-2">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="font-semibold text-lg" id="current-document-category">Incorporation Documents</h3>
                            <div class="flex items-center">
                                <span class="text-sm text-gray-600 mr-3">12 documents</span>
                                <input type="text" id="document-search" placeholder="Search documents..." class="border rounded-lg px-3 py-1 text-sm">
                            </div>
                        </div>
                        
                        <div class="space-y-4" id="documents-list">
                            <div class="flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer document-item" data-document="articles">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded bg-blue-100 flex items-center justify-center mr-3">
                                        <i class="fas fa-file-pdf text-blue-600"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium">Articles of Association</h4>
                                        <p class="text-sm text-gray-500">Template • Updated: 15 Jun 2023</p>
                                    </div>
                                </div>
                                <button class="text-blue-600 hover:text-blue-800 preview-document" data-document="articles">
                                    <i class="fas fa-eye"></i> Preview
                                </button>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer document-item" data-document="ntn">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded bg-green-100 flex items-center justify-center mr-3">
                                        <i class="fas fa-file-alt text-green-600"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium">NTN Application Form</h4>
                                        <p class="text-sm text-gray-500">Form • Updated: 10 May 2023</p>
                                    </div>
                                </div>
                                <button class="text-blue-600 hover:text-blue-800 preview-document" data-document="ntn">
                                    <i class="fas fa-eye"></i> Preview
                                </button>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer document-item" data-document="contract">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded bg-purple-100 flex items-center justify-center mr-3">
                                        <i class="fas fa-file-contract text-purple-600"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-medium">Standard Employment Contract</h4>
                                        <p class="text-sm text-gray-500">Template • Updated: 20 Jul 2023</p>
                                    </div>
                                </div>
                                <button class="text-blue-600 hover:text-blue-800 preview-document" data-document="contract">
                                    <i class="fas fa-eye"></i> Preview
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Chat Advisor View -->
            <div id="chat-view" class="tab-content hidden">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                    <div>
                        <h2 class="text-3xl font-bold mb-2">Legal AI Advisor</h2>
                        <p class="text-gray-600">Get answers to your legal compliance questions</p>
                    </div>
                    <div class="mt-4 md:mt-0 flex space-x-3">
                        <button class="classic-button flex items-center" id="clear-chat">
                            <i class="fas fa-history mr-2"></i> Clear Chat
                        </button>
                        <button class="classic-button flex items-center">
                            <i class="fas fa-book mr-2"></i> Resources
                        </button>
                        <button class="classic-button flex items-center pulse" id="lawyer-assistance-btn">
                            <i class="fas fa-life-ring mr-2"></i> Lawyer Help
                        </button>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="card p-6 lg:col-span-1">
                        <h3 class="font-semibold text-lg mb-4">Quick Questions</h3>
                        <div class="space-y-3">
                            <button class="w-full text-left p-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition quick-question">
                                How do I register with SECP?
                            </button>
                            <button class="w-full text-left p-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition quick-question">
                                What are the tax benefits for startups?
                            </button>
                            <button class="w-full text-left p-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition quick-question">
                                How to register for sales tax?
                            </button>
                            <button class="w-full text-left p-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition quick-question">
                                What is employee provident fund?
                            </button>
                            <button class="w-full text-left p-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition quick-question">
                                How to protect intellectual property?
                            </button>
                        </div>
                        
                        <h3 class="font-semibold text-lg mt-6 mb-4">Legal Topics</h3>
                        <div class="flex flex-wrap gap-2">
                            <span class="text-xs bg-purple-100 text-purple-800 px-3 py-1 rounded-full">SECP Regulations</span>
                            <span class="text-xs bg-blue-100 text-blue-800 px-3 py-1 rounded-full">FBR Taxation</span>
                            <span class="text-xs bg-green-100 text-green-800 px-3 py-1 rounded-full">Employment Law</span>
                            <span class="text-xs bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full">Intellectual Property</span>
                            <span class="text-xs bg-red-100 text-red-800 px-3 py-1 rounded-full">Data Protection</span>
                            <span class="text-xs bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full">Contract Law</span>
                        </div>
                    </div>
                    
                    <div class="card p-0 lg:col-span-2 flex flex-col">
                        <div class="p-4 border-b">
                            <div class="flex items-center">
                                <div class="w-8 h-8 rounded-full" style="background: var(--primary); display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                                    <i class="fas fa-robot text-white"></i>
                                </div>
                                <div>
                                    <h3 class="font-medium">AI Legal Assistant</h3>
                                    <p class="text-xs text-gray-500">Trained on Pakistani laws</p>
                                </div>
                                <div class="ml-auto flex space-x-2">
                                    <button class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center" id="refresh-chat">
                                        <i class="fas fa-sync-alt text-gray-600"></i>
                                    </button>
                                    <button class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center">
                                        <i class="fas fa-ellipsis-h text-gray-600"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div id="chat-messages" class="flex-grow p-4 overflow-y-auto" style="max-height: 400px;">
                            <div class="ai-bubble chat-bubble">
                                <div class="font-medium mb-1">Legal Assistant</div>
                                <p>Hello! I'm your AI legal assistant specialized in Pakistani compliance. How can I help you today?</p>
                            </div>
                        </div>
                        
                        <div class="p-4 border-t">
                            <div class="flex">
                                <input type="text" id="chat-input" placeholder="Ask about SECP, FBR, employment law..." class="flex-grow rounded-l-lg border border-r-0 px-4 py-3 focus:outline-none">
                                <button id="send-message" class="classic-button rounded-l-none rounded-r-lg">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                            <div class="flex justify-between mt-2">
                                <div class="text-xs text-gray-500">
                                    <i class="fas fa-shield-alt mr-1"></i> Your data is secure
                                </div>
                                <div class="text-xs text-gray-500">
                                    Powered by AI with Pakistan Legal Knowledge
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Account View -->
            <div id="account-view" class="tab-content hidden">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                    <div>
                        <h2 class="text-3xl font-bold mb-2">Account Settings</h2>
                        <p class="text-gray-600">Manage your profile and subscription</p>
                    </div>
                    <div class="mt-4 md:mt-0">
                        <button id="upgrade-plan-btn" class="classic-button">
                            <i class="fas fa-crown mr-2"></i> Upgrade Plan
                        </button>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="card p-6 lg:col-span-1">
                        <div class="flex flex-col items-center">
                            <div class="w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center mb-4">
                                <i class="fas fa-user text-3xl text-gray-600"></i>
                            </div>
                            <h3 class="text-xl font-bold" id="account-name">Aayan Shaikh</h3>
                            <p class="text-gray-600 mb-4" id="account-email">aayan@startup.com</p>
                            <div class="badge compliance-badge mb-6" id="account-plan">Professional Plan</div>
                            
                            <div class="w-full space-y-4">
                                <button class="w-full text-left p-3 rounded-lg bg-green-100 text-green-800 account-tab active" data-tab="profile">
                                    <i class="fas fa-user-circle mr-2"></i> Profile
                                </button>
                                <button class="w-full text-left p-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition account-tab" data-tab="security">
                                    <i class="fas fa-shield-alt mr-2"></i> Security
                                </button>
                                <button class="w-full text-left p-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition account-tab" data-tab="notifications">
                                    <i class="fas fa-bell mr-2"></i> Notifications
                                </button>
                                <button class="w-full text-left p-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition account-tab" data-tab="billing">
                                    <i class="fas fa-credit-card mr-2"></i> Billing
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card p-6 lg:col-span-2">
                        <div id="profile-tab" class="account-tab-content">
                            <h3 class="font-semibold text-lg mb-6">Profile Information</h3>
                            <form id="profile-form">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                    <div>
                                        <label class="form-label">First Name</label>
                                        <input type="text" id="first-name" class="form-input" placeholder="Aayan" value="Aayan" required>
                                    </div>
                                    <div>
                                        <label class="form-label">Last Name</label>
                                        <input type="text" id="last-name" class="form-input" placeholder="Shaikh" value="Shaikh">
                                    </div>
                                    <div>
                                        <label class="form-label">Email</label>
                                        <input type="email" id="account-email-input" class="form-input" placeholder="your@email.com" value="aayan@startup.com" required>
                                    </div>
                                    <div>
                                        <label class="form-label">Phone</label>
                                        <input type="tel" id="phone" class="form-input" placeholder="+92 300 1234567" value="+92 300 1234567">
                                    </div>
                                </div>
                                <div class="mb-6">
                                    <label class="form-label">Company Name</label>
                                    <input type="text" id="company-name" class="form-input" placeholder="My Startup Pvt Ltd" value="Tech Innovations Pvt Ltd">
                                </div>
                                <div class="mb-6">
                                    <label class="form-label">Company Type</label>
                                    <select id="company-type" class="form-input">
                                        <option value="">Select company type</option>
                                        <option value="sole-proprietorship">Sole Proprietorship</option>
                                        <option value="partnership">Partnership</option>
                                        <option value="private-limited" selected>Private Limited Company</option>
                                        <option value="public-limited">Public Limited Company</option>
                                        <option value="llc">Limited Liability Company (LLC)</option>
                                    </select>
                                </div>
                                <div class="mb-6">
                                    <label class="form-label">About</label>
                                    <textarea id="about" class="form-input" rows="3" placeholder="Brief description about your startup">Pakistani startup focused on legal tech innovation</textarea>
                                </div>
                                <button type="submit" class="form-submit">Update Profile</button>
                            </form>
                        </div>
                        
                        <div id="security-tab" class="account-tab-content hidden">
                            <h3 class="font-semibold text-lg mb-6">Security Settings</h3>
                            <div class="space-y-6">
                                <div>
                                    <h4 class="font-medium mb-2">Password</h4>
                                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                        <span>••••••••</span>
                                        <button class="text-blue-600 hover:text-blue-800">Change Password</button>
                                    </div>
                                </div>
                                
                                <div>
                                    <h4 class="font-medium mb-2">Two-Factor Authentication</h4>
                                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                        <span>Currently disabled</span>
                                        <button class="classic-button px-4 py-1">Enable</button>
                                    </div>
                                </div>
                                
                                <div>
                                    <h4 class="font-medium mb-2">Active Sessions</h4>
                                    <div class="border rounded-lg overflow-hidden">
                                        <div class="flex items-center justify-between p-3 border-b">
                                            <div>
                                                <p class="font-medium">Chrome on Windows</p>
                                                <p class="text-sm text-gray-500">Lahore, Pakistan • Active now</p>
                                            </div>
                                            <button class="text-red-600 hover:text-red-800">
                                                <i class="fas fa-times"></i> Logout
                                            </button>
                                        </div>
                                        <div class="flex items-center justify-between p-3">
                                            <div>
                                                <p class="font-medium">Safari on iPhone</p>
                                                <p class="text-sm text-gray-500">Karachi, Pakistan • 2 days ago</p>
                                            </div>
                                            <button class="text-red-600 hover:text-red-800">
                                                <i class="fas fa-times"></i> Logout
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="notifications-tab" class="account-tab-content hidden">
                            <h3 class="font-semibold text-lg mb-6">Notification Preferences</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-3 border rounded-lg">
                                    <div>
                                        <h4 class="font-medium">Email Notifications</h4>
                                        <p class="text-sm text-gray-500">Receive important updates via email</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer" checked>
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                    </label>
                                </div>
                                
                                <div class="flex items-center justify-between p-3 border rounded-lg">
                                    <div>
                                        <h4 class="font-medium">SMS Alerts</h4>
                                        <p class="text-sm text-gray-500">Get urgent reminders via SMS</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                    </label>
                                </div>
                                
                                <div class="flex items-center justify-between p-3 border rounded-lg">
                                    <div>
                                        <h4 class="font-medium">Push Notifications</h4>
                                        <p class="text-sm text-gray-500">Get app notifications on your device</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer" checked>
                                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                    </label>
                                </div>
                                
                                <div class="mt-6">
                                    <h4 class="font-medium mb-3">Notification Types</h4>
                                    <div class="space-y-3">
                                        <div class="flex items-start">
                                            <input type="checkbox" class="mt-1 mr-3" checked>
                                            <div>
                                                <p class="font-medium">Deadline Reminders</p>
                                                <p class="text-sm text-gray-500">Get notified about upcoming compliance deadlines</p>
                                            </div>
                                        </div>
                                        <div class="flex items-start">
                                            <input type="checkbox" class="mt-1 mr-3" checked>
                                            <div>
                                                <p class="font-medium">Task Updates</p>
                                                <p class="text-sm text-gray-500">Notifications when team members complete tasks</p>
                                            </div>
                                        </div>
                                        <div class="flex items-start">
                                            <input type="checkbox" class="mt-1 mr-3">
                                            <div>
                                                <p class="font-medium">Product Updates</p>
                                                <p class="text-sm text-gray-500">Receive information about new features</p>
                                            </div>
                                        </div>
                                        <div class="flex items-start">
                                            <input type="checkbox" class="mt-1 mr-3" checked>
                                            <div>
                                                <p class="font-medium">Legal Updates</p>
                                                <p class="text-sm text-gray-500">Stay informed about changes in Pakistani laws</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="billing-tab" class="account-tab-content hidden">
                            <h3 class="font-semibold text-lg mb-6">Billing & Subscription</h3>
                            <div class="space-y-6">
                                <div class="border rounded-lg p-4">
                                    <div class="flex justify-between items-center mb-3">
                                        <h4 class="font-medium">Professional Plan</h4>
                                        <span class="badge compliance-badge">Active</span>
                                    </div>
                                    <p class="text-gray-600 mb-4">Full access to all compliance features, document templates, and AI advisor</p>
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <span class="text-2xl font-bold">Rs. 4,999</span>
                                            <span class="text-gray-500">/month</span>
                                        </div>
                                        <button class="classic-button px-4 py-1">Change Plan</button>
                                    </div>
                                </div>
                                
                                <div>
                                    <h4 class="font-medium mb-3">Payment Method</h4>
                                    <div class="flex items-center justify-between p-3 border rounded-lg">
                                        <div class="flex items-center">
                                            <i class="fab fa-cc-visa text-2xl text-blue-800 mr-3"></i>
                                            <div>
                                                <p class="font-medium">Visa ending in 1234</p>
                                                <p class="text-sm text-gray-500">Expires 12/2025</p>
                                            </div>
                                        </div>
                                        <button class="text-blue-600 hover:text-blue-800">Edit</button>
                                    </div>
                                </div>
                                
                                <div>
                                    <h4 class="font-medium mb-3">Billing History</h4>
                                    <div class="border rounded-lg overflow-hidden">
                                        <div class="flex items-center justify-between p-3 border-b">
                                            <div>
                                                <p class="font-medium">Professional Plan</p>
                                                <p class="text-sm text-gray-500">15 Jul 2023</p>
                                            </div>
                                            <div>
                                                <p class="font-medium text-right">Rs. 4,999</p>
                                                <p class="text-sm text-green-600 text-right">Paid</p>
                                            </div>
                                        </div>
                                        <div class="flex items-center justify-between p-3 border-b">
                                            <div>
                                                <p class="font-medium">Professional Plan</p>
                                                <p class="text-sm text-gray-500">15 Jun 2023</p>
                                            </div>
                                            <div>
                                                <p class="font-medium text-right">Rs. 4,999</p>
                                                <p class="text-sm text-green-600 text-right">Paid</p>
                                            </div>
                                        </div>
                                        <div class="flex items-center justify-between p-3">
                                            <div>
                                                <p class="font-medium">Professional Plan</p>
                                                <p class="text-sm text-gray-500">15 May 2023</p>
                                            </div>
                                            <div>
                                                <p class="font-medium text-right">Rs. 4,999</p>
                                                <p class="text-sm text-green-600 text-right">Paid</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Legal Documents View -->
            <div id="legal-view" class="tab-content hidden">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                    <div>
                        <h2 class="text-3xl font-bold mb-2">Legal Information</h2>
                        <p class="text-gray-600">Important legal documents and policies</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="card p-6">
                        <h3 class="font-semibold text-lg mb-4">Legal Documents</h3>
                        <div class="space-y-3">
                            <button class="w-full text-left p-3 rounded-lg bg-green-100 text-green-800 legal-doc" data-doc="disclaimer">
                                <i class="fas fa-file-contract mr-2"></i> Disclaimer
                            </button>
                            <button class="w-full text-left p-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition legal-doc" data-doc="privacy">
                                <i class="fas fa-shield-alt mr-2"></i> Privacy Policy
                            </button>
                            <button class="w-full text-left p-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition legal-doc" data-doc="terms">
                                <i class="fas fa-file-signature mr-2"></i> Terms of Service
                            </button>
                            <button class="w-full text-left p-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition legal-doc" data-doc="refund">
                                <i class="fas fa-money-bill-wave mr-2"></i> Refund Policy
                            </button>
                            <button class="w-full text-left p-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition legal-doc" data-doc="cookie">
                                <i class="fas fa-cookie-bite mr-2"></i> Cookie Policy
                            </button>
                        </div>
                    </div>
                    
                    <div class="card p-6 md:col-span-2">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="font-semibold text-lg" id="current-legal-doc">Disclaimer</h3>
                            <button class="classic-button flex items-center">
                                <i class="fas fa-download mr-2"></i> Download PDF
                            </button>
                        </div>
                        
                        <div class="legal-content" id="legal-content">
                            <!-- Legal content will be rendered here -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Backend Simulation View -->
            <div id="backend-view" class="tab-content hidden">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                    <div>
                        <h2 class="text-3xl font-bold mb-2">Backend Simulation</h2>
                        <p class="text-gray-600">Server-side processes and data management</p>
                    </div>
                    <div class="mt-4 md:mt-0">
                        <button id="refresh-backend" class="classic-button">
                            <i class="fas fa-sync-alt mr-2"></i> Refresh
                        </button>
                    </div>
                </div>
                
                <div class="card p-6">
                    <h3 class="font-semibold text-lg mb-4">Backend Operations Console</h3>
                    <div class="backend-console" id="backend-console">
                        <div class="console-line console-info">[INFO] System initialized at <span id="backend-time">2023-07-15 10:30:45</span></div>
                        <div class="console-line console-success">[SUCCESS] Database connection established</div>
                        <div class="console-line console-info">[INFO] Loading user data...</div>
                        <div class="console-line console-success">[SUCCESS] User data loaded successfully</div>
                        <div class="console-line console-info">[INFO] Verifying compliance status...</div>
                        <div class="console-line console-success">[SUCCESS] Compliance status updated</div>
                        <div class="console-line console-warning">[WARNING] 3 tasks approaching deadline</div>
                    </div>
                    
                    <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-medium mb-3">Database Schema</h4>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <pre class="text-sm">
users {
  id: ObjectId
  name: String
  email: String
  company: String
  role: String
  created_at: Date
}

tasks {
  id: ObjectId
  title: String
  description: String
  category: String
  due_date: Date
  completed: Boolean
  created_at: Date
}

documents {
  id: ObjectId
  title: String
  category: String
  file_path: String
  created_at: Date
}
                                </pre>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-medium mb-3">API Endpoints</h4>
                            <div class="space-y-3">
                                <div class="p-3 border rounded-lg">
                                    <div class="font-mono text-sm">GET /api/user</div>
                                    <div class="text-xs text-gray-600 mt-1">Retrieve current user data</div>
                                </div>
                                <div class="p-3 border rounded-lg">
                                    <div class="font-mono text-sm">GET /api/tasks</div>
                                    <div class="text-xs text-gray-600 mt-1">Retrieve all compliance tasks</div>
                                </div>
                                <div class="p-3 border rounded-lg">
                                    <div class="font-mono text-sm">PUT /api/task/:id</div>
                                    <div class="text-xs text-gray-600 mt-1">Update task status</div>
                                </div>
                                <div class="p-3 border rounded-lg">
                                    <div class="font-mono text-sm">POST /api/document</div>
                                    <div class="text-xs text-gray-600 mt-1">Upload new document</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="bg-gray-100 border-t py-8 traditional-pattern">
            <div class="container mx-auto px-4">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                    <div>
                        <div class="flex items-center mb-4">
                            <div class="w-10 h-10 bg-green-700 rounded-lg flex items-center justify-center mr-3">
                                <i class="fas fa-balance-scale text-white text-xl"></i>
                            </div>
                            <h3 class="font-bold text-lg">PakLegalComply</h3>
                        </div>
                        <p class="text-gray-600 text-sm">
                            Bridging tradition with modern legal compliance for Pakistani startups.
                        </p>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold mb-4">Resources</h4>
                        <ul class="space-y-2">
                            <li><a href="https://www.secp.gov.pk/" class="text-gray-600 hover:text-green-700 text-sm">SECP Guidelines</a></li>
                            <li><a href="https://www.fbr.gov.pk/" class="text-gray-600 hover:text-green-700 text-sm">FBR Tax Portal</a></li>
                            <li><a href="https://www.eobi.gov.pk/" class="text-gray-600 hover:text-green-700 text-sm">EOBI Regulations</a></li>
                            <li><a href="https://sessi.gos.pk/" class="text-gray-600 hover:text-green-700 text-sm">SESSI Requirements</a></li>
                            <li><a href="https://www.pmo.gov.pk/startup_pakistan.php" class="text-gray-600 hover:text-green-700 text-sm">Startup Pakistan Policy</a></li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold mb-4">Quick Links</h4>
                        <ul class="space-y-2">
                            <li><a href="#" class="text-gray-600 hover:text-green-700 text-sm">Document Templates</a></li>
                            <li><a href="#" class="text-gray-600 hover:text-green-700 text-sm">Compliance Timeline</a></li>
                            <li><a href="#" class="text-gray-600 hover:text-green-700 text-sm">Legal Advisor</a></li>
                            <li><a href="#" class="text-gray-600 hover:text-green-700 text-sm">Founder Dashboard</a></li>
                            <li><a href="#" class="text-gray-600 hover:text-green-700 text-sm">Checklist Generator</a></li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold mb-4">Contact</h4>
                        <ul class="space-y-2">
                            <li class="flex items-center text-gray-600 text-sm">
                                <i class="fas fa-envelope mr-2"></i> support@paklegalcomply.pk
                            </li>
                            <li class="flex items-center text-gray-600 text-sm">
                                <i class="fab fa-whatsapp mr-2"></i> +92 300 1234567
                            </li>
                            <li class="flex items-center text-gray-600 text-sm">
                                <i class="fas fa-map-marker-alt mr-2"></i> Arfa Software Park, Lahore
                            </li>
                            <li class="flex items-center text-gray-600 text-sm">
                                <i class="fas fa-user mr-2"></i> Developed by: <a href="https://www.linkedin.com/in/aayanshaikhacca" class="text-green-700 hover:underline ml-1">Aayan Shaikh</a>
                            </li>
                        </ul>
                        <div class="flex space-x-3 mt-4">
                            <a href="#" class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center">
                                <i class="fab fa-facebook-f text-gray-600"></i>
                            </a>
                            <a href="#" class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center">
                                <i class="fab fa-twitter text-gray-600"></i>
                            </a>
                            <a href="#" class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center">
                                <i class="fab fa-linkedin-in text-gray-600"></i>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="border-t mt-8 pt-6 text-center text-gray-500 text-sm">
                    <p>© 2023 PakLegalComply - Pakistan. All rights reserved. SECP Registered Legal Tech Provider #LTP-2023-789</p>
                    <div class="mt-2 flex justify-center space-x-4">
                        <a href="#" class="hover:text-green-700">Privacy Policy</a>
                        <a href="#" class="hover:text-green-700">Terms of Service</a>
                        <a href="#" class="hover:text-green-700">Disclaimers</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- Document Preview Modal -->
    <div class="document-preview-modal">
        <div class="document-preview-container">
            <div class="p-4 border-b flex justify-between items-center">
                <h3 class="font-semibold text-lg" id="preview-title">Document Preview</h3>
                <button id="close-preview" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="document-preview-content p-4" id="document-preview-content">
                <!-- Document content will be rendered here -->
            </div>
        </div>
    </div>

    <!-- Add Task Modal -->
    <div id="add-task-modal" class="document-preview-modal">
        <div class="document-preview-container">
            <div class="p-4 border-b flex justify-between items-center">
                <h3 class="font-semibold text-lg">Add New Compliance Task</h3>
                <button id="close-task-modal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="p-4">
                <form id="task-form">
                    <div class="mb-4">
                        <label class="form-label">Task Title</label>
                        <input type="text" class="form-input" placeholder="Enter task title" required>
                    </div>
                    
                    <div class="mb-4">
                        <label class="form-label">Description</label>
                        <textarea class="form-input" rows="3" placeholder="Describe the task" required></textarea>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="form-label">Category</label>
                            <select class="form-input" required>
                                <option value="">Select category</option>
                                <option value="incorporation">Incorporation</option>
                                <option value="taxation">Taxation</option>
                                <option value="labor">Labor Regulations</option>
                                <option value="ip">Intellectual Property</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="form-label">Due Date</label>
                            <input type="date" class="form-input" required>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label class="form-label">Tags (comma separated)</label>
                        <input type="text" class="form-input" placeholder="SECP, Mandatory, Tax">
                    </div>
                    
                    <button type="submit" class="form-submit">Add Task</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // ========================
        // APP STATE
        // ========================
        let appState = {
            isAuthenticated: false,
            currentUser: null,
            currentCategory: 'taxation',
            currentDocumentCategory: 'incorporation',
            completedTasks: {
                'inc-1': true,
                'inc-2': true,
                'inc-3': true,
                'inc-4': true,
                'tax-1': true,
                'tax-2': true,
                'lab-1': true,
                'lab-2': true
            },
            reminders: {},
            chatHistory: [
                { sender: 'ai', text: "Hello! I'm your AI legal assistant specialized in Pakistani compliance. How can I help you today?" }
            ],
            documents: [],
            subscription: {
                plan: 'professional',
                expiry: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000) // 1 year from now
            },
            currentDate: new Date(),
            calendarDate: new Date()
        };

        // ========================
        // INITIALIZATION
        // ========================
        document.addEventListener('DOMContentLoaded', function() {
            // Show loading overlay initially
            document.getElementById('loading-overlay').style.display = 'flex';
            
            // Simulate loading data
            setTimeout(() => {
                // Check if user is already authenticated
                const storedUser = localStorage.getItem('paklegalcomply_user');
                if (storedUser) {
                    appState.isAuthenticated = true;
                    appState.currentUser = JSON.parse(storedUser);
                    showMainApp();
                } else {
                    // Show login page
                    document.getElementById('loading-overlay').style.display = 'none';
                    document.getElementById('login-page').classList.remove('hidden');
                }
                
                // Initialize UI components
                initThemeToggle();
                initTabs();
                initComplianceChart();
                renderDashboard();
                renderCategories();
                renderTasksForCategory(appState.currentCategory);
                renderCalendar();
                renderChatHistory();
                renderLegalContent('disclaimer');
                
                // Set up event listeners
                initEventListeners();
            }, 1500);
        });

        // ========================
        // UI RENDERING FUNCTIONS
        // ========================
        function showMainApp() {
            document.getElementById('loading-overlay').style.display = 'none';
            document.getElementById('login-page').classList.add('hidden');
            document.getElementById('main-app').classList.remove('hidden');
            
            // Update user info
            if (appState.currentUser) {
                document.getElementById('user-name-display').textContent = appState.currentUser.name;
                document.getElementById('account-name').textContent = appState.currentUser.name;
                document.getElementById('account-email').textContent = appState.currentUser.email;
                document.getElementById('account-email-input').value = appState.currentUser.email;
                document.getElementById('user-role-display').textContent = 'Professional';
                document.getElementById('account-plan').textContent = 'Professional Plan';
            }
        }
        
        function renderDashboard() {
            // Update overall progress
            const progress = calculateOverallProgress();
            document.getElementById('overall-progress').textContent = `${progress}%`;
            document.getElementById('compliance-status').textContent = 
                progress >= 75 ? 'Good Standing' : progress >= 50 ? 'Moderate Risk' : 'High Risk';
            document.getElementById('last-updated').textContent = new Date().toLocaleDateString();
            
            // Render compliance status list
            const statusList = document.getElementById('compliance-status-list');
            statusList.innerHTML = '';
            
            complianceData.categories.forEach(category => {
                const categoryProgress = calculateCategoryProgress(category.id);
                
                const item = document.createElement('div');
                item.innerHTML = `
                    <div>
                        <div class="flex justify-between mb-1">
                            <span>${category.title}</span>
                            <span class="font-semibold">${categoryProgress}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${categoryProgress}%"></div>
                        </div>
                    </div>
                `;
                statusList.appendChild(item);
            });
            
            // Render urgent tasks
            const urgentTasks = document.getElementById('urgent-tasks');
            urgentTasks.innerHTML = '';
            
            let urgentCount = 0;
            complianceData.categories.forEach(category => {
                category.tasks.forEach(task => {
                    if (task.due && !appState.completedTasks[task.id] && urgentCount < 3) {
                        const badgeClass = task.due.includes('Overdue') ? 'noncompliant-badge' : 'risk-badge';
                        const badgeText = task.due.includes('Overdue') ? `Overdue: ${task.due.split(' ')[1]}` : `Due in ${task.due}`;
                        
                        const taskEl = document.createElement('div');
                        taskEl.className = 'task-item p-3 rounded-lg border border-yellow-200 bg-yellow-50';
                        taskEl.innerHTML = `
                            <div class="flex justify-between">
                                <h4 class="font-medium">${task.title}</h4>
                                <span class="badge ${badgeClass}">${badgeText}</span>
                            </div>
                            <p class="text-sm text-gray-600 mt-1">${task.description}</p>
                            <div class="flex mt-2 space-x-2">
                                ${task.tags.map(tag => `<span class="text-xs bg-${category.color}-100 text-${category.color}-800 px-2 py-1 rounded">${tag}</span>`).join('')}
                            </div>
                        `;
                        urgentTasks.appendChild(taskEl);
                        urgentCount++;
                    }
                });
            });
            
            // Render recent activities
            const activities = document.getElementById('recent-activities');
            activities.innerHTML = `
                <div class="flex items-start">
                    <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center mr-3">
                        <i class="fas fa-check text-green-600"></i>
                    </div>
                    <div>
                        <p class="font-medium">You marked "Obtain NTN Certificate" as completed</p>
                        <p class="text-sm text-gray-500">Today at 10:30 AM</p>
                    </div>
                </div>
                <div class="flex items-start">
                    <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-3">
                        <i class="fas fa-file-download text-blue-600"></i>
                    </div>
                    <div>
                        <p class="font-medium">You downloaded "Articles of Association" template</p>
                        <p class="text-sm text-gray-500">Yesterday at 4:15 PM</p>
                    </div>
                </div>
                <div class="flex items-start">
                    <div class="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center mr-3">
                        <i class="fas fa-robot text-purple-600"></i>
                    </div>
                    <div>
                        <p class="font-medium">You asked: "What are the penalties for late SECP filing?"</p>
                        <p class="text-sm text-gray-500">Yesterday at 11:20 AM</p>
                    </div>
                </div>
            `;
        }

        function renderCategories() {
            const categoriesList = document.getElementById('categories-list');
            categoriesList.innerHTML = '';
            
            complianceData.categories.forEach(category => {
                const completedTasks = category.tasks.filter(task => appState.completedTasks[task.id]).length;
                const totalTasks = category.tasks.length;
                const progressPercent = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
                
                let badgeClass, badgeText;
                if (progressPercent === 100) {
                    badgeClass = 'compliance-badge';
                    badgeText = `${completedTasks}/${totalTasks}`;
                } else if (progressPercent >= 50) {
                    badgeClass = 'risk-badge';
                    badgeText = `${completedTasks}/${totalTasks}`;
                } else {
                    badgeClass = 'noncompliant-badge';
                    badgeText = `${completedTasks}/${totalTasks}`;
                }
                
                const isActive = category.id === appState.currentCategory;
                const bgClass = isActive ? `bg-${category.color}-100` : '';
                
                const categoryEl = document.createElement('div');
                categoryEl.className = `flex items-center justify-between p-3 rounded-lg cursor-pointer transition ${bgClass} hover:bg-${category.color}-50`;
                categoryEl.innerHTML = `
                    <div class="flex items-center">
                        <i class="fas ${category.icon} text-${category.color}-600 mr-3"></i>
                        <span>${category.title}</span>
                    </div>
                    <span class="badge ${badgeClass}">${badgeText}</span>
                `;
                
                categoryEl.addEventListener('click', () => {
                    appState.currentCategory = category.id;
                    renderCategories();
                    renderTasksForCategory(category.id);
                });
                
                categoriesList.appendChild(categoryEl);
            });
        }

        function renderTasksForCategory(categoryId) {
            const category = complianceData.categories.find(c => c.id === categoryId);
            if (!category) return;
            
            document.getElementById('current-category').textContent = `${category.title} Compliance`;
            
            const completedTasks = category.tasks.filter(task => appState.completedTasks[task.id]).length;
            const totalTasks = category.tasks.length;
            const progressPercent = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
            
            document.getElementById('category-progress').textContent = `${completedTasks}/${totalTasks} completed`;
            document.getElementById('category-progress-bar').style.width = `${progressPercent}%`;
            
            const tasksContainer = document.getElementById('tasks-container');
            tasksContainer.innerHTML = '';
            
            category.tasks.forEach(task => {
                const isCompleted = appState.completedTasks[task.id] || false;
                const hasReminder = appState.reminders[task.id] || false;
                
                const taskEl = document.createElement('div');
                taskEl.className = `task-item ${isCompleted ? 'completed' : ''} p-4 border rounded-lg mb-4`;
                
                let dueBadge = '';
                if (task.due && !isCompleted) {
                    const badgeClass = task.due.includes('Overdue') ? 'noncompliant-badge' : 'risk-badge';
                    const badgeText = task.due.includes('Overdue') ? `Overdue: ${task.due.split(' ')[1]}` : `Due in ${task.due}`;
                    dueBadge = `<span class="badge ${badgeClass} ml-2">${badgeText}</span>`;
                }
                
                let reminderButton = '';
                if (!isCompleted) {
                    reminderButton = `
                        <button class="text-xs ${hasReminder ? 'bg-yellow-100 text-yellow-800 reminder-set' : 'bg-gray-100'} px-3 py-1 rounded-full flex items-center set-reminder" data-task="${task.id}">
                            <i class="far fa-calendar-plus mr-1"></i> ${hasReminder ? 'Reminder Set' : 'Set Reminder'}
                        </button>
                    `;
                }
                
                let completedInfo = '';
                if (isCompleted && task.completedDate) {
                    completedInfo = `
                        <div class="mt-2 flex items-center text-xs text-gray-500">
                            <i class="far fa-calendar-check mr-1"></i>
                            <span>Completed: ${task.completedDate}</span>
                        </div>
                    `;
                }
                
                taskEl.innerHTML = `
                    <div class="flex items-start">
                        <div class="flex items-center h-5 mt-1">
                            <input type="checkbox" class="h-4 w-4 ${isCompleted ? 'text-green-500' : 'text-blue-500'} rounded" 
                                ${isCompleted ? 'checked' : ''} data-task="${task.id}">
                        </div>
                        <div class="ml-3">
                            <div class="flex items-center">
                                <h4 class="font-medium">${task.title}</h4>
                                ${dueBadge}
                            </div>
                            <p class="text-sm text-gray-600 mt-1">${task.description}</p>
                            <div class="flex mt-2 space-x-2">
                                ${task.tags.map(tag => `<span class="text-xs bg-${category.color}-100 text-${category.color}-800 px-2 py-1 rounded">${tag}</span>`).join('')}
                            </div>
                            ${completedInfo}
                            <div class="mt-3 flex space-x-2">
                                ${reminderButton}
                                <button class="text-xs bg-gray-100 px-3 py-1 rounded-full flex items-center">
                                    <i class="fas fa-file-download mr-1"></i> Form
                                </button>
                                <button class="text-xs bg-gray-100 px-3 py-1 rounded-full flex items-center">
                                    <i class="fas fa-question-circle mr-1"></i> Help
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                tasksContainer.appendChild(taskEl);
            });
            
            // Add event listeners to the checkboxes and buttons
            document.querySelectorAll(`#tasks-container input[type="checkbox"]`).forEach(checkbox => {
                checkbox.addEventListener('change', handleTaskCompletion);
            });
            
            document.querySelectorAll(`#tasks-container .set-reminder`).forEach(button => {
                button.addEventListener('click', handleSetReminder);
            });
        }

        function renderCalendar() {
            const calendarDays = document.getElementById('calendar-days');
            calendarDays.innerHTML = '';
            
            const month = appState.calendarDate.getMonth();
            const year = appState.calendarDate.getFullYear();
            
            // Set current month display
            document.getElementById('current-month').textContent = 
                appState.calendarDate.toLocaleString('default', { month: 'long', year: 'numeric' });
            
            // Get first day of month
            const firstDay = new Date(year, month, 1).getDay();
            
            // Get days in month
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            // Previous month's days
            const prevMonthDays = new Date(year, month, 0).getDate();
            
            // Create day cells
            for (let i = 0; i < firstDay; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day text-gray-400';
                day.textContent = prevMonthDays - firstDay + i + 1;
                calendarDays.appendChild(day);
            }
            
            // Current month days
            const today = new Date();
            const isCurrentMonth = month === today.getMonth() && year === today.getFullYear();
            
            for (let i = 1; i <= daysInMonth; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day';
                day.textContent = i;
                
                // Check if today
                if (isCurrentMonth && i === today.getDate()) {
                    day.classList.add('today');
                }
                
                // Add events (sample data)
                if ([5, 12, 15, 20, 25].includes(i)) {
                    day.classList.add('event');
                }
                
                calendarDays.appendChild(day);
            }
            
            // Next month days
            const totalCells = 42; // 6 rows * 7 days
            const daysSoFar = firstDay + daysInMonth;
            const nextMonthDays = totalCells - daysSoFar;
            
            for (let i = 1; i <= nextMonthDays; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day text-gray-400';
                day.textContent = i;
                calendarDays.appendChild(day);
            }
        }

        function renderChatHistory() {
            const chatMessages = document.getElementById('chat-messages');
            chatMessages.innerHTML = '';
            
            appState.chatHistory.forEach((message, index) => {
                const messageEl = document.createElement('div');
                messageEl.className = message.sender === 'user' ? 'user-bubble chat-bubble' : 'ai-bubble chat-bubble';
                messageEl.style.animationDelay = `${index * 0.1}s`;
                messageEl.innerHTML = `
                    <div class="font-medium mb-1">${message.sender === 'user' ? 'You' : 'Legal Assistant'}</div>
                    <p>${message.text}</p>
                `;
                chatMessages.appendChild(messageEl);
            });
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function renderDocumentPreview(documentId) {
            const previewContent = document.getElementById('document-preview-content');
            
            let content = '';
            if (documentId === 'articles') {
                content = `
                    <div class="document-preview">
                        <div class="document-header">
                            <div class="document-title">ARTICLES OF ASSOCIATION</div>
                            <div class="document-subtitle">of</div>
                            <div class="document-title">TECH INNOVATIONS PRIVATE LIMITED</div>
                            <div class="mt-4 text-sm">
                                <p>Under the Companies Act, 2017</p>
                                <p>Pakistan</p>
                            </div>
                        </div>
                        
                        <div class="document-body">
                            <p>1. The name of the company is TECH INNOVATIONS PRIVATE LIMITED.</p>
                            <p>2. The registered office of the company will be situated in Lahore, Pakistan.</p>
                            <p>3. The objects for which the company is established are:</p>
                            <p class="pl-4">(a) To develop, market, and sell software products and solutions;</p>
                            <p class="pl-4">(b) To provide IT consulting services to businesses in Pakistan and abroad;</p>
                            <p class="pl-4">(c) To engage in any other lawful business activity as determined by the directors.</p>
                            
                            <p class="mt-8">4. The liability of the members is limited.</p>
                            <p>5. The authorized share capital of the company is Rs. 5,000,000 (Five Million Rupees) divided into 500,000 ordinary shares of Rs. 10 each.</p>
                        </div>
                        
                        <div class="mt-16">
                            <p>Dated this 15th day of July 2023</p>
                            <div class="flex justify-between mt-8">
                                <div>
                                    <p>________________________</p>
                                    <p>Director</p>
                                    <p>Aayan Shaikh</p>
                                </div>
                                <div>
                                    <p>________________________</p>
                                    <p>Director</p>
                                    <p>Sarah Khan</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } else if (documentId === 'ntn') {
                content = `
                    <div class="document-preview">
                        <div class="document-header">
                            <div class="document-title">APPLICATION FOR NATIONAL TAX NUMBER</div>
                            <div class="mt-4 text-sm">
                                <p>Federal Board of Revenue</p>
                                <p>Government of Pakistan</p>
                            </div>
                        </div>
                        
                        <div class="document-body">
                            <p>1. Applicant Information:</p>
                            <table class="w-full mt-2">
                                <tr>
                                    <td class="w-1/3">Full Name:</td>
                                    <td>Aayan Shaikh</td>
                                </tr>
                                <tr>
                                    <td>Company Name:</td>
                                    <td>Tech Innovations Pvt Ltd</td>
                                </tr>
                                <tr>
                                    <td>Business Address:</td>
                                    <td>123 Tech Street, Lahore</td>
                                </tr>
                                <tr>
                                    <td>Business Nature:</td>
                                    <td>Software Development & IT Services</td>
                                </tr>
                            </table>
                            
                            <p class="mt-4">2. Business Details:</p>
                            <table class="w-full mt-2">
                                <tr>
                                    <td class="w-1/3">Business Start Date:</td>
                                    <td>01 June 2023</td>
                                </tr>
                                <tr>
                                    <td>Estimated Annual Income:</td>
                                    <td>Rs. 5,000,000</td>
                                </tr>
                                <tr>
                                    <td>Business Type:</td>
                                    <td>Private Limited Company</td>
                                </tr>
                            </table>
                            
                            <p class="mt-4">3. Declaration:</p>
                            <p class="mt-2">I hereby declare that the information provided is true and correct to the best of my knowledge and belief.</p>
                            
                            <div class="mt-8">
                                <div class="signature-line"></div>
                                <p>Signature of Applicant</p>
                            </div>
                        </div>
                    </div>
                `;
            } else if (documentId === 'contract') {
                content = `
                    <div class="document-preview">
                        <div class="document-header">
                            <div class="document-title">EMPLOYMENT CONTRACT</div>
                            <div class="mt-4 text-sm">
                                <p>Between</p>
                                <p>TECH INNOVATIONS PRIVATE LIMITED (Employer)</p>
                                <p>and</p>
                                <p>[Employee Name] (Employee)</p>
                            </div>
                        </div>
                        
                        <div class="document-body">
                            <p>This Employment Contract ("Contract") is made on [Date] between:</p>
                            <p class="mt-4"><strong>Tech Innovations Private Limited</strong>, a company registered under the Companies Act, 2017 having its registered office at 123 Tech Street, Lahore (the "Employer")</p>
                            <p class="mt-4"><strong>[Employee Name]</strong>, residing at [Employee Address] (the "Employee")</p>
                            
                            <p class="mt-6">1. Position and Duties:</p>
                            <p class="pl-4">The Employee shall serve as [Job Title] and shall perform the duties as assigned by the Employer.</p>
                            
                            <p class="mt-4">2. Term of Employment:</p>
                            <p class="pl-4">This Contract shall commence on [Start Date] and continue until terminated by either party with [Notice Period] notice.</p>
                            
                            <p class="mt-4">3. Compensation:</p>
                            <p class="pl-4">The Employee shall receive a monthly salary of Rs. [Amount] payable on the last working day of each month.</p>
                            
                            <p class="mt-4">4. Working Hours:</p>
                            <p class="pl-4">The Employee shall work from 9:00 AM to 5:00 PM, Monday to Friday, with one hour for lunch.</p>
                            
                            <p class="mt-4">5. Leave Entitlement:</p>
                            <p class="pl-4">The Employee shall be entitled to 18 days of paid annual leave in addition to public holidays observed in Pakistan.</p>
                        </div>
                    </div>
                `;
            }
            
            previewContent.innerHTML = content;
            document.querySelector('.document-preview-modal').classList.add('show');
        }
        
        function renderLegalContent(docId) {
            const contentEl = document.getElementById('legal-content');
            document.getElementById('current-legal-doc').textContent = 
                docId === 'disclaimer' ? 'Disclaimer' : 
                docId === 'privacy' ? 'Privacy Policy' : 
                docId === 'terms' ? 'Terms of Service' : 
                docId === 'refund' ? 'Refund Policy' : 'Cookie Policy';
                
            let content = '';
            
            if (docId === 'disclaimer') {
                content = `
                    <h2>Legal Disclaimer</h2>
                    <p><em>Last updated: July 15, 2023</em></p>
                    
                    <h3>1. Introduction</h3>
                    <p>The information provided by PakLegalComply ("we," "us," or "our") on https://paklegalcomply.pk (the "Site") is for general informational purposes only. All information on the Site is provided in good faith, however we make no representation or warranty of any kind, express or implied, regarding the accuracy, adequacy, validity, reliability, availability, or completeness of any information on the Site.</p>
                    
                    <h3>2. Professional Disclaimer</h3>
                    <p>The Site cannot and does not contain legal advice. The legal information is provided for general informational and educational purposes only and is not a substitute for professional advice.</p>
                    
                    <p>Accordingly, before taking any actions based upon such information, we encourage you to consult with the appropriate legal professionals. We do not provide any kind of legal advice. The use or reliance of any information contained on this site is solely at your own risk.</p>
                    
                    <h3>3. External Links Disclaimer</h3>
                    <p>The Site may contain links to other websites or content belonging to or originating from third parties. Such external links are not investigated, monitored, or checked for accuracy, adequacy, validity, reliability, availability, or completeness by us.</p>
                    
                    <p>We do not warrant, endorse, guarantee, or assume responsibility for the accuracy or reliability of any information offered by third-party websites linked through the site. We will not be a party to or in any way be responsible for monitoring any transaction between you and third-party providers of products or services.</p>
                `;
            } else if (docId === 'privacy') {
                content = `
                    <h2>Privacy Policy</h2>
                    <p><em>Last updated: July 15, 2023</em></p>
                    
                    <h3>1. Information We Collect</h3>
                    <p>We collect several different types of information for various purposes to provide and improve our Service to you.</p>
                    
                    <h4>Personal Data</h4>
                    <p>While using our Service, we may ask you to provide us with certain personally identifiable information that can be used to contact or identify you ("Personal Data"). Personally identifiable information may include, but is not limited to:</p>
                    <ul>
                        <li>Email address</li>
                        <li>First name and last name</li>
                        <li>Phone number</li>
                        <li>Business information</li>
                        <li>Cookies and Usage Data</li>
                    </ul>
                    
                    <h3>2. Use of Data</h3>
                    <p>PakLegalComply uses the collected data for various purposes:</p>
                    <ul>
                        <li>To provide and maintain our Service</li>
                        <li>To notify you about changes to our Service</li>
                        <li>To allow you to participate in interactive features of our Service when you choose to do so</li>
                        <li>To provide customer support</li>
                        <li>To gather analysis or valuable information so that we can improve our Service</li>
                        <li>To monitor the usage of our Service</li>
                        <li>To detect, prevent and address technical issues</li>
                    </ul>
                `;
            } else if (docId === 'terms') {
                content = `
                    <h2>Terms of Service</h2>
                    <p><em>Last updated: July 15, 2023</em></p>
                    
                    <h3>1. Acceptance of Terms</h3>
                    <p>By accessing or using the PakLegalComply website at https://paklegalcomply.pk (the "Site") or any services provided by PakLegalComply (the "Service"), you agree to be bound by these Terms of Service ("Terms"). If you disagree with any part of the terms, then you may not access the Service.</p>
                    
                    <h3>2. Accounts</h3>
                    <p>When you create an account with us, you must provide us information that is accurate, complete, and current at all times. Failure to do so constitutes a breach of the Terms, which may result in immediate termination of your account on our Service.</p>
                    
                    <p>You are responsible for safeguarding the password that you use to access the Service and for any activities or actions under your password, whether your password is with our Service or a third-party service.</p>
                    
                    <h3>3. Intellectual Property</h3>
                    <p>The Service and its original content, features, and functionality are and will remain the exclusive property of PakLegalComply and its licensors. The Service is protected by copyright, trademark, and other laws of both the Pakistan and foreign countries. Our trademarks and trade dress may not be used in connection with any product or service without the prior written consent of PakLegalComply.</p>
                `;
            } else if (docId === 'refund') {
                content = `
                    <h2>Refund Policy</h2>
                    <p><em>Last updated: July 15, 2023</em></p>
                    
                    <h3>1. Subscription Fees</h3>
                    <p>All subscription fees for PakLegalComply services are non-refundable. We do not provide refunds or credits for any partial-month subscription periods, or unused PakLegalComply services.</p>
                    
                    <h3>2. Exceptions</h3>
                    <p>Notwithstanding the foregoing, we will provide a refund in the following situations:</p>
                    <ul>
                        <li>Duplicate payments made by the same user for the same subscription period</li>
                        <li>Payments made in error that we can verify</li>
                        <li>As required by Pakistani law</li>
                    </ul>
                    
                    <p>To request a refund, please contact our support team at support@paklegalcomply.pk with your transaction details.</p>
                `;
            } else if (docId === 'cookie') {
                content = `
                    <h2>Cookie Policy</h2>
                    <p><em>Last updated: July 15, 2023</em></p>
                    
                    <h3>1. What Are Cookies</h3>
                    <p>As is common practice with almost all professional websites, this site uses cookies, which are tiny files that are downloaded to your computer, to improve your experience. This page describes what information they gather, how we use it, and why we sometimes need to store these cookies.</p>
                    
                    <h3>2. How We Use Cookies</h3>
                    <p>We use cookies for a variety of reasons detailed below. Unfortunately, in most cases there are no industry standard options for disabling cookies without completely disabling the functionality and features they add to this site.</p>
                    
                    <h3>3. Disabling Cookies</h3>
                    <p>You can prevent the setting of cookies by adjusting the settings on your browser (see your browser Help for how to do this). Be aware that disabling cookies will affect the functionality of this and many other websites that you visit.</p>
                `;
            }
            
            contentEl.innerHTML = content;
        }

        // ========================
        // EVENT HANDLERS
        // ========================
        function initEventListeners() {
            // Login form
            document.getElementById('login-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                
                // Simulate login process
                document.getElementById('loading-overlay').style.display = 'flex';
                
                setTimeout(() => {
                    // Create user object
                    appState.currentUser = {
                        id: 'usr_12345',
                        name: 'Aayan Shaikh',
                        email: email,
                        company: 'Tech Innovations Pvt Ltd',
                        role: 'founder'
                    };
                    
                    // Save to local storage
                    localStorage.setItem('paklegalcomply_user', JSON.stringify(appState.currentUser));
                    
                    appState.isAuthenticated = true;
                    showMainApp();
                    showToast('Login successful! Welcome back.');
                }, 1000);
            });
            
            // Register link
            document.getElementById('register-link').addEventListener('click', function(e) {
                e.preventDefault();
                showToast('Registration functionality would be implemented in a full application');
            });
            
            // Theme toggle
            document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
            
            // Logout button
            document.getElementById('logout-button').addEventListener('click', function() {
                // Clear user data
                localStorage.removeItem('paklegalcomply_user');
                appState.isAuthenticated = false;
                appState.currentUser = null;
                
                // Show login page
                document.getElementById('main-app').classList.add('hidden');
                document.getElementById('login-page').classList.remove('hidden');
                showToast('You have been logged out successfully');
            });
            
            // Chat functionality
            document.getElementById('send-message').addEventListener('click', sendMessage);
            document.getElementById('chat-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendMessage();
            });
            
            // Quick questions
            document.querySelectorAll('.quick-question').forEach(button => {
                button.addEventListener('click', function() {
                    const question = this.textContent.trim();
                    document.getElementById('chat-input').value = question;
                    sendMessage();
                });
            });
            
            // Clear chat
            document.getElementById('clear-chat').addEventListener('click', function() {
                appState.chatHistory = [appState.chatHistory[0]]; // Keep the first welcome message
                renderChatHistory();
                showToast('Chat history cleared');
            });
            
            // Refresh chat
            document.getElementById('refresh-chat').addEventListener('click', function() {
                appState.chatHistory = [appState.chatHistory[0]];
                renderChatHistory();
                showToast('Chat refreshed');
            });
            
            // Document category navigation
            document.querySelectorAll('.document-category').forEach(button => {
                button.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    appState.currentDocumentCategory = category;
                    
                    // Update active category button
                    document.querySelectorAll('.document-category').forEach(btn => {
                        btn.classList.remove('bg-green-100', 'text-green-800');
                    });
                    this.classList.add('bg-green-100', 'text-green-800');
                    
                    document.getElementById('current-document-category').textContent = `${category.charAt(0).toUpperCase() + category.slice(1)} Documents`;
                });
            });
            
            // Account tabs
            document.querySelectorAll('.account-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Update active tab
                    document.querySelectorAll('.account-tab').forEach(t => {
                        t.classList.remove('active', 'bg-green-100', 'text-green-800');
                    });
                    this.classList.add('active', 'bg-green-100', 'text-green-800');
                    
                    // Show corresponding content
                    document.querySelectorAll('.account-tab-content').forEach(content => {
                        content.classList.add('hidden');
                    });
                    document.getElementById(`${tabId}-tab`).classList.remove('hidden');
                });
            });
            
            // Lawyer assistance button
            document.getElementById('lawyer-assistance-btn').addEventListener('click', function() {
                showToast('Your request for lawyer assistance has been submitted');
            });
            
            // Upgrade plan button
            document.getElementById('upgrade-plan-btn').addEventListener('click', function() {
                showToast('Redirecting to subscription upgrade page');
            });
            
            // Upload document button
            document.getElementById('upload-document-btn').addEventListener('click', function() {
                showToast('Document upload functionality would be implemented in a full application');
            });
            
            // Create document button
            document.getElementById('create-document-btn').addEventListener('click', function() {
                showToast('Document creation functionality would be implemented in a full application');
            });
            
            // Calendar navigation
            document.getElementById('prev-month').addEventListener('click', function() {
                appState.calendarDate.setMonth(appState.calendarDate.getMonth() - 1);
                renderCalendar();
                showToast('Previous month displayed');
            });
            
            document.getElementById('next-month').addEventListener('click', function() {
                appState.calendarDate.setMonth(appState.calendarDate.getMonth() + 1);
                renderCalendar();
                showToast('Next month displayed');
            });
            
            // Add event button
            document.getElementById('add-event-btn').addEventListener('click', function() {
                showToast('Event creation functionality would be implemented in a full application');
            });
            
            // Document preview
            document.querySelectorAll('.preview-document').forEach(button => {
                button.addEventListener('click', function() {
                    const documentId = this.getAttribute('data-document');
                    document.getElementById('preview-title').textContent = 
                        document.querySelector(`.document-item[data-document="${documentId}"] h4`).textContent;
                    renderDocumentPreview(documentId);
                });
            });
            
            // Close document preview
            document.getElementById('close-preview').addEventListener('click', function() {
                document.querySelector('.document-preview-modal').classList.remove('show');
            });
            
            // Close document preview when clicking outside
            document.querySelector('.document-preview-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('show');
                }
            });
            
            // Legal document navigation
            document.querySelectorAll('.legal-doc').forEach(button => {
                button.addEventListener('click', function() {
                    const docId = this.getAttribute('data-doc');
                    
                    // Update active document
                    document.querySelectorAll('.legal-doc').forEach(btn => {
                        btn.classList.remove('bg-green-100', 'text-green-800');
                    });
                    this.classList.add('bg-green-100', 'text-green-800');
                    
                    renderLegalContent(docId);
                });
            });
            
            // Add task button
            document.getElementById('add-task-btn').addEventListener('click', function() {
                document.getElementById('add-task-modal').classList.add('show');
            });
            
            // Close task modal
            document.getElementById('close-task-modal').addEventListener('click', function() {
                document.getElementById('add-task-modal').classList.remove('show');
            });
            
            // Close task modal when clicking outside
            document.getElementById('add-task-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('show');
                }
            });
            
            // Submit task form
            document.getElementById('task-form').addEventListener('submit', function(e) {
                e.preventDefault();
                showToast('New task added successfully');
                document.getElementById('add-task-modal').classList.remove('show');
            });
        }

        function handleTaskCompletion(e) {
            const taskId = e.target.dataset.task;
            const isCompleted = e.target.checked;
            
            if (isCompleted) {
                appState.completedTasks[taskId] = true;
                
                // Record activity
                const task = findTaskById(taskId);
                if (task) {
                    appState.chatHistory.push({
                        sender: 'system',
                        text: `You marked "${task.title}" as completed`
                    });
                }
            } else {
                delete appState.completedTasks[taskId];
            }
            
            // Update UI
            const taskItem = e.target.closest('.task-item');
            if (taskItem) {
                taskItem.classList.toggle('completed', isCompleted);
            }
            
            renderCategories();
            renderDashboard();
            updateComplianceChart();
            showToast('Task status updated');
        }

        function handleSetReminder(e) {
            const taskId = e.target.dataset.task;
            const task = findTaskById(taskId);
            
            if (task) {
                appState.reminders[taskId] = true;
                
                // Update UI
                e.target.classList.add('reminder-set', 'bg-yellow-100', 'text-yellow-800');
                e.target.innerHTML = '<i class="far fa-calendar-check mr-1"></i> Reminder Set';
                
                // Record activity
                appState.chatHistory.push({
                    sender: 'system',
                    text: `You set a reminder for "${task.title}"`
                });
                
                showToast(`Reminder set for "${task.title}"`);
            }
        }

        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message to chat history
            appState.chatHistory.push({ sender: 'user', text: message });
            renderChatHistory();
            
            // Clear input
            input.value = '';
            
            // Show typing indicator
            const chatMessages = document.getElementById('chat-messages');
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'ai-bubble chat-bubble';
            typingIndicator.id = 'typing-indicator';
            typingIndicator.innerHTML = `
                <div class="font-medium mb-1">Legal Assistant</div>
                <div class="flex items-center">
                    <div class="typing-indicator"></div>
                    <div class="typing-indicator"></div>
                    <div class="typing-indicator"></div>
                </div>
            `;
            chatMessages.appendChild(typingIndicator);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Simulate AI response delay
            setTimeout(() => {
                document.getElementById('typing-indicator').remove();
                
                // Generate AI response
                const aiResponse = generateAIResponse(message);
                appState.chatHistory.push({ sender: 'ai', text: aiResponse });
                renderChatHistory();
            }, 1500);
        }

        // ========================
        // HELPER FUNCTIONS
        // ========================
        function calculateOverallProgress() {
            let totalTasks = 0;
            let completedTasks = 0;
            
            complianceData.categories.forEach(category => {
                totalTasks += category.tasks.length;
                category.tasks.forEach(task => {
                    if (appState.completedTasks[task.id]) completedTasks++;
                });
            });
            
            return totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
        }

        function calculateCategoryProgress(categoryId) {
            const category = complianceData.categories.find(c => c.id === categoryId);
            if (!category) return 0;
            
            const completedTasks = category.tasks.filter(task => appState.completedTasks[task.id]).length;
            return category.tasks.length > 0 ? Math.round((completedTasks / category.tasks.length) * 100) : 0;
        }

        function findTaskById(taskId) {
            for (const category of complianceData.categories) {
                for (const task of category.tasks) {
                    if (task.id === taskId) return task;
                }
            }
            return null;
        }

        function generateAIResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('secp') || lowerMessage.includes('incorporat')) {
                return "To register with SECP: 1) Reserve your company name, 2) Prepare Memorandum and Articles of Association, 3) Submit incorporation documents through eServices portal, 4) Pay registration fees. The process typically takes 7-10 working days. You'll receive a Certificate of Incorporation upon approval. Learn more at https://www.secp.gov.pk/";
            } else if (lowerMessage.includes('ntn') || lowerMessage.includes('tax number')) {
                return "To obtain an NTN: 1) Register on FBR's Iris portal, 2) Fill out Form 181 for business registration, 3) Submit required documents (CNIC, proof of address, business details), 4) Pay applicable fees. Processing takes 7-10 working days. Learn more at https://www.fbr.gov.pk/";
            } else if (lowerMessage.includes('sales tax') || lowerMessage.includes('vat')) {
                return "Sales tax registration requires: 1) NTN certificate, 2) Business bank account, 3) Proof of business premises. Apply through FBR's Iris portal. Threshold is Rs. 10 million annual turnover. Once registered, you must file monthly returns by the 15th of each month.";
            } else if (lowerMessage.includes('labor') || lowerMessage.includes('employ')) {
                return "Key labor law requirements: 1) Register with EOBI within 30 days of hiring first employee, 2) Register with provincial social security institution (e.g., SESSI in Sindh), 3) Maintain proper employment records, 4) Comply with minimum wage regulations, 5) Provide statutory leaves and benefits.";
            } else if (lowerMessage.includes('intellectual') || lowerMessage.includes('ip')) {
                return "To protect intellectual property in Pakistan: 1) Register trademarks with IPO Pakistan, 2) File patents for inventions, 3) Copyright creative works automatically (registration optional). The IPO Pakistan website has detailed guides: http://www.ipo.gov.pk/";
            } else if (lowerMessage.includes('deadline') || lowerMessage.includes('penalty')) {
                return "Common penalties: Late SECP filing (Rs. 500/day), Late tax return (1% per month of tax due), Late sales tax return (0.1% per day of tax due). Always file on time to avoid penalties.";
            } else if (lowerMessage.includes('disclaimer') || lowerMessage.includes('policy')) {
                return "You can find our legal documents in the 'Legal' tab. This includes our Disclaimer, Privacy Policy, Terms of Service, Refund Policy, and Cookie Policy. Would you like me to take you there?";
            }
            
            return "I'm your AI legal assistant specialized in Pakistani compliance. I can help with SECP registration, FBR taxation, employment regulations, intellectual property, and data protection. Please ask your specific question for detailed guidance.";
        }

        function toggleTheme() {
            const html = document.documentElement;
            const themeToggle = document.getElementById('theme-toggle');
            
            if (html.getAttribute('data-theme') === 'dark') {
                html.removeAttribute('data-theme');
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            } else {
                html.setAttribute('data-theme', 'dark');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            }
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }

        function initTabs() {
            const tabButtons = document.querySelectorAll('.tab-button');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Remove active class from all buttons
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // Add active class to clicked button
                    button.classList.add('active');
                    
                    // Hide all tab contents
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.add('hidden');
                    });
                    
                    // Show the selected tab content
                    const tabId = button.getAttribute('data-tab') + '-view';
                    document.getElementById(tabId).classList.remove('hidden');
                    
                    // If switching to dashboard, update it
                    if (tabId === 'dashboard-view') {
                        renderDashboard();
                    }
                    
                    // Update backend console time
                    if (tabId === 'backend-view') {
                        const now = new Date();
                        document.getElementById('backend-time').textContent = now.toISOString().split('T')[0] + ' ' + now.toTimeString().split(' ')[0];
                    }
                });
            });
        }

        function initComplianceChart() {
            const ctx = document.getElementById('complianceChart').getContext('2d');
            window.complianceChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: complianceData.categories.map(c => c.title),
                    datasets: [{
                        label: 'Your Compliance',
                        data: complianceData.categories.map(c => calculateCategoryProgress(c.id)),
                        backgroundColor: 'rgba(44, 95, 45, 0.2)',
                        borderColor: '#2c5f2d',
                        pointBackgroundColor: '#2c5f2d',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#2c5f2d'
                    }, {
                        label: 'Industry Average',
                        data: [85, 50, 60, 40],
                        backgroundColor: 'rgba(212, 175, 55, 0.2)',
                        borderColor: '#d4af37',
                        pointBackgroundColor: '#d4af37',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#d4af37'
                    }]
                },
                options: {
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
        }

        function updateComplianceChart() {
            if (window.complianceChart) {
                window.complianceChart.data.datasets[0].data = complianceData.categories.map(c => calculateCategoryProgress(c.id));
                window.complianceChart.update();
            }
        }

        function initThemeToggle() {
            // Set initial theme based on system preference
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.setAttribute('data-theme', 'dark');
                document.getElementById('theme-toggle').innerHTML = '<i class="fas fa-sun"></i>';
            }
        }

        // ========================
        // DATA STRUCTURE
        // ========================
        const complianceData = {
            categories: [
                {
                    id: "incorporation",
                    title: "Incorporation",
                    icon: "fa-building",
                    color: "green",
                    tasks: [
                        { 
                            id: "inc-1", 
                            title: "Reserve company name with SECP", 
                            description: "Check availability and reserve your company name",
                            tags: ["SECP", "Mandatory"],
                            due: null,
                            completed: true,
                            completedDate: "15 Jun 2023"
                        },
                        { 
                            id: "inc-2", 
                            title: "Prepare Memorandum & Articles of Association", 
                            description: "Draft and notarize MoA & AoA",
                            tags: ["Legal", "Mandatory"],
                            due: null,
                            completed: true,
                            completedDate: "18 Jun 2023"
                        },
                        { 
                            id: "inc-3", 
                            title: "File incorporation documents with SECP", 
                            description: "Submit all required documents online via eServices",
                            tags: ["SECP", "Mandatory"],
                            due: null,
                            completed: true,
                            completedDate: "20 Jun 2023"
                        },
                        { 
                            id: "inc-4", 
                            title: "Obtain Certificate of Incorporation", 
                            description: "Receive and verify incorporation certificate",
                            tags: ["SECP", "Mandatory"],
                            due: null,
                            completed: true,
                            completedDate: "22 Jun 2023"
                        },
                        { 
                            id: "inc-5", 
                            title: "Register with PSEB (for IT companies)", 
                            description: "Optional registration for IT startups with Pakistan Software Export Board",
                            tags: ["PSEB", "Optional"],
                            due: null,
                            completed: false
                        }
                    ]
                },
                {
                    id: "taxation",
                    title: "Taxation",
                    icon: "fa-file-invoice-dollar",
                    color: "yellow",
                    tasks: [
                        { 
                            id: "tax-1", 
                            title: "Obtain National Tax Number (NTN)", 
                            description: "Register with FBR for tax purposes",
                            tags: ["FBR", "Mandatory"],
                            due: null,
                            completed: true,
                            completedDate: "15 Jun 2023"
                        },
                        { 
                            id: "tax-2", 
                            title: "Register for Sales Tax", 
                            description: "Required if annual turnover exceeds Rs. 10 million",
                            tags: ["FBR", "Threshold"],
                            due: null,
                            completed: true,
                            completedDate: "22 Jun 2023"
                        },
                        { 
                            id: "tax-3", 
                            title: "File Monthly Withholding Tax Statement", 
                            description: "Due by the 15th of following month",
                            tags: ["FBR", "Monthly"],
                            due: "3 days",
                            completed: false
                        },
                        { 
                            id: "tax-4", 
                            title: "Register for Income Tax", 
                            description: "Mandatory for all registered companies",
                            tags: ["FBR", "Mandatory"],
                            due: "1 month",
                            completed: false
                        },
                        { 
                            id: "tax-5", 
                            title: "File Annual Tax Return", 
                            description: "Due by December 31st each year",
                            tags: ["FBR", "Annual"],
                            due: "4 months",
                            completed: false
                        }
                    ]
                },
                {
                    id: "labor",
                    title: "Labor Regulations",
                    icon: "fa-users",
                    color: "brown",
                    tasks: [
                        { 
                            id: "lab-1", 
                            title: "Register with EOBI", 
                            description: "Employees' Old-Age Benefits Institution registration",
                            tags: ["EOBI", "Mandatory"],
                            due: null,
                            completed: true,
                            completedDate: "10 Jul 2023"
                        },
                        { 
                            id: "lab-2", 
                            title: "Register with SESSI", 
                            description: "Social Security registration for employees",
                            tags: ["SESSI", "Mandatory"],
                            due: null,
                            completed: true,
                            completedDate: "12 Jul 2023"
                        },
                        { 
                            id: "lab-3", 
                            title: "Develop Employee Handbook", 
                            description: "Create company policies compliant with labor laws",
                            tags: ["Internal", "Best Practice"],
                            due: "1 month",
                            completed: false
                        },
                        { 
                            id: "lab-4", 
                            title: "Set up Provident Fund", 
                            description: "Mandatory for companies with 5+ employees",
                            tags: ["EOBI", "Mandatory"],
                            due: "2 months",
                            completed: false
                        }
                    ]
                },
                {
                    id: "ip",
                    title: "Intellectual Property",
                    icon: "fa-lightbulb",
                    color: "purple",
                    tasks: [
                        { 
                            id: "ip-1", 
                            title: "Conduct Trademark Search", 
                            description: "Check availability of your brand name/logo",
                            tags: ["IPO", "Recommended"],
                            due: null,
                            completed: false
                        },
                        { 
                            id: "ip-2", 
                            title: "Register Trademark", 
                            description: "File application with Intellectual Property Organization",
                            tags: ["IPO", "Protection"],
                            due: "2 months",
                            completed: false
                        },
                        { 
                            id: "ip-3", 
                            title: "File for Patent Protection", 
                            description: "If you have unique technology or process",
                            tags: ["IPO", "Protection"],
                            due: null,
                            completed: false
                        }
                    ]
                }
            ]
        };
    </script>
</body>
</html>
